var app=angular.module("return_file",["ui.router","ui.bootstrap","ngResource","ngStorage","ngAnimate","datePicker","ngTable","angular-js-xlsx","WebService","ui.utils"]);app.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){function d(a,b,c,d,e,f,g){var h=a.defer();e.get("/user/loggedin").success(function(a){b(function(){c.is_loggedin=!0,g.setUser(a.user),"dashboard"==d.current.name&&"client"==g.getUser().role.type&&d.go("user-profile"),console.log("$state >>>>> ",d.current.name),h.resolve()},200)}).error(function(a){b(function(){f.token=null,c.is_loggedin=!1,h.resolve(),d.go("login")},200)})}function e(a,b,c,d,e,f){var g=a.defer();d.get("/user/loggedin").success(function(a){b(function(){c.is_loggedin=!0,g.resolve(),e.go("dashboard")},200)}).error(function(a){b(function(){f.token=null,c.is_loggedin=!1,g.resolve()},200)})}e.$inject=["$q","$timeout","$rootScope","$http","$state","$localStorage"],d.$inject=["$q","$timeout","$rootScope","$state","$http","$localStorage","UserModel"],c.interceptors.push(["$q","$location","$window","$localStorage",function(a,b,c,d){return{request:function(a){a.url.indexOf("login")>-1;return d.token&&(a.headers=a.headers||{},a.headers.Authorization="bearer "+d.token),a},response:function(c){return 401===c.status&&b.path("/"),c||a.when(c)}}}]),b.otherwise("/login"),a.state("login",{templateUrl:"view/common/login.html",url:"/login",controller:"Login_Controller",resolve:{loggedout:e}}).state("sign-up",{templateUrl:"view/common/sign_up.html",url:"/sign-up",controller:"User_Controller",resolve:{loggedout:e}}).state("dashboard",{templateUrl:"view/dashboard.html",url:"/dashboard",controller:"Main_Controller",resolve:{loggedout:d}}).state("profile-update",{templateUrl:"view/profile_update.html",url:"/profile-update",controller:"User_Controller",resolve:{loggedout:d}}).state("user-profile",{templateUrl:"view/user_profile.html",url:"/user-profile/:user_id",controller:"User_Controller",resolve:{loggedout:d}}).state("user-details",{templateUrl:"view/user_details.html",url:"/user-details/:user_id",controller:"User_Controller",resolve:{loggedout:d}}).state("user-list",{templateUrl:"view/user_list.html",url:"/user-list",controller:"User_Controller",resolve:{loggedout:d}}).state("return-file",{templateUrl:"view/return_file.html",url:"/return-file",controller:"Return_Controller",resolve:{loggedout:d}}).state("return-file-list",{templateUrl:"view/return_file_list.html",url:"/return-file-list/:status",controller:"Return_Controller",resolve:{loggedout:d}}).state("previous-return-file-details",{templateUrl:"view/previous_return_file_details.html",url:"/previous-return-file-details",controller:"Return_Controller",resolve:{loggedout:d}}).state("payment",{templateUrl:"view/payment.html",url:"/payment",controller:"Return_Controller",resolve:{loggedout:d}}).state("admin-returnFile-details",{templateUrl:"view/admin-returnFile-details.html",url:"/admin-returnFile-details/:client_id",controller:"Return_Controller",resolve:{loggedout:d}}).state("returnFile-details",{templateUrl:"view/returnFile-details.html",url:"/returnFile-details/fiscalYear/:returnFile_id",controller:"Return_Controller",resolve:{loggedout:d}})}]),app.run(["$http","$rootScope","$localStorage","$timeout","EnvService","Constants",function(a,b,c,d,e,f){b.$on("$stateChangeSuccess",function(a,c,d,e,f){b.stateName=c.name}),e.setSettings(f)}]),app.factory("Util",["$rootScope","$timeout",function(a,b){var c={};return a.alerts=[],c.alertMessage=function(c,d){var e={type:c,msg:d};a.alerts.push(e),b(function(){a.alerts.splice(a.alerts.indexOf(e),1)},5e3)},c}]),app.filter("getShortName",function(){return function(a){if(a){var b=angular.copy(a);return b=b.split(" "),b=b[0].charAt(0)+b[b.length-1].charAt(0),b.toUpperCase()}}}),app.filter("dateformat",function(){return function(a){if(a)return moment(a).format("DD MMM, YYYY")}}),app.filter("getShortName",function(){return function(a){if(a){var b=angular.copy(a);return b=b.split(" "),b=b[0].charAt(0)+b[b.length-1].charAt(0),b.toUpperCase()}}}),app.filter("capitalize",function(){return function(a){return a?a.charAt(0,3).toUpperCase():""}}),app.constant("Constants",{debug:!0,storagePrefix:"goAppAccount$",getTokenKey:function(){return this.storagePrefix+"token"},getLoggedIn:function(){return this.storagePrefix+"loggedin"},alertTime:3e3,getUsername:function(){return this.storagePrefix+"username"},getPassword:function(){return this.storagePrefix+"password"},getIsRemember:function(){return this.storagePrefix+"isRemember"},hashKey:"goAppAccount",envData:{env:"dev",dev:{basePath:"http://ec2-52-23-158-141.compute-1.amazonaws.com",appPath:"http://ec2-52-23-158-141.compute-1.amazonaws.com"},prod:{basePath:"http://ec2-52-23-158-141.compute-1.amazonaws.com",appPath:"http://ec2-52-23-158-141.compute-1.amazonaws.com"}}}),angular.module("WebService",[]).factory("API",["$http","$resource","EnvService",function(a,b,c){return{getRole:{url:"/role/",method:"GET"},postRole:{url:"/role",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},updateRole:{url:"/role/",method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"}},deleteRole:{url:"/role/:_id",method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}},userLogin:{url:"/user/login",method:"POST"},getUser:{url:"/user/",method:"GET"},postUser:{url:"/user/",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},deleteUser:{url:"/user/:_id",method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}},updateUser:{url:"/user/",method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"}},postClient:{url:"/client",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},postReturnFile:{url:"/returnFile",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},getcount:{url:"/returnFile/count",method:"GET"},getReturnList:{url:"/returnFile",method:"GET"},getItr:{url:"/returnFile/itr",method:"GET"},postTransaction:{url:"/returnFile/transaction",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},getFiscalYear:{url:"/returnFile/fiscalYear",method:"GET"},getReturnFile:{url:"/returnFile",method:"GET"},updateReturnFile:{url:"/returnFile/",method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"}},getPaymentList:{url:"/returnFile/transaction/payment",method:"GET"}}}]).factory("ApiCall",["$http","$resource","API","EnvService","ApiGenerator",function(a,b,c,d,e){return b("/",null,{getRole:e.getApi("getRole"),userLogin:e.getApi("userLogin"),getUser:e.getApi("getUser"),postUser:e.getApi("postUser"),getFiscalYear:e.getApi("getFiscalYear"),deleteUser:e.getApi("deleteUser"),updateUser:e.getApi("updateUser"),postReturnFile:e.getApi("postReturnFile"),getcount:e.getApi("getcount"),getReturnList:e.getApi("getReturnList"),getReturnFile:e.getApi("getReturnFile"),getItr:e.getApi("getItr"),postTransaction:e.getApi("postTransaction"),updateReturnFile:e.getApi("updateReturnFile"),getPaymentList:e.getApi("getPaymentList")})}]).factory("ApiGenerator",["$http","$resource","API","EnvService",function(a,b,c,d){return{getApi:function(a){var b={};return b=angular.copy(c[a]),b.url=d.getBasePath()+b.url,b}}}]).factory("EnvService",["$http","$localStorage",function(a,b){var c=env={},d={};return{setSettings:function(a){d=a,this.setEnvData(a.envData)},getSettings:function(a){return a?d[a]:null},setEnvData:function(a){c=a[a.env]},getEnvData:function(){return c},getBasePath:function(a){return this.getEnvData().basePath}}}]),app.factory("UserModel",function(){var a={};return a.setUser=function(b){a.user=b},a.getUser=function(b){return a.user},a.unsetUser=function(b){a.user=null},a}),app.controller("Login_Controller",["$scope","$rootScope","$rootScope","$state","$localStorage","NgTableParams","ApiCall","$timeout","UserModel","Util",function(a,b,b,c,d,e,f,g,h,i){a.user={},a.user.username=d.user?d.user.uname:"",a.user.password=d.user?d.user.password:"",a.userLogin=function(){b.showPreloader=!0,f.userLogin(a.user,function(e){a.user.rememberMe&&(d.user={uname:a.user.username,password:a.user.password}),b.showPreloader=!1,d.token=e.data.token,b.is_loggedin=!0,"superAdmin"!=e.data.user.role.type||e.data.user.adhar?"superAdmin"==e.data.user.role.type&&e.data.user.adhar?c.go("dashboard"):e.data.user.adhar?c.go("user-profile",{user_id:e.data.user._id}):c.go("profile-update"):c.go("profile-update")},function(a){b.showPreloader=!1,i.alertMessage("danger","Invalid username and password")})}}]),app.controller("Main_Controller",["$scope","$rootScope","$state","$localStorage","NgTableParams","ApiCall","UserModel","$uibModal","$stateParams","Util","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){a.userList={},a.count={},a.users={},a.signOut=function(){delete d.token,b.is_loggedin=!1,c.go("login")},a.getAllUsers=function(){f.getUser(function(b){a.users.nos=b.data.length,a.userList=b.data,a.userData=new e,a.userData.settings({dataset:a.userList})},function(a){})},a.checkAdmin=function(){a.superAdmin=!1;var b=g.getUser();return"superAdmin"==b.role.type?a.superAdmin=!0:a.superAdmin=!1,a.superAdmin},a.deleteUser=function(b){a.deleteUserId=b._id,a.modalInstance=h.open({animation:!0,templateUrl:"view/modals/user-delete-modal.html",controller:"daleteUserModalCtrl",size:"md",resolve:{userDelete:function(){return a.userDelete}}})},a.userDelete=function(){f.deleteUser({_id:a.deleteUserId},function(b){j.alertMessage("success",b.message),a.getAllUsers()},function(a){})},a.getReturnCount=function(){f.getcount(function(b){a.returnFilesCounts=b.data,console.log(b)},function(a){})}}]),app.controller("daleteUserModalCtrl",["$scope","$uibModalInstance","userDelete",function(a,b,c){a.ok=function(){c(),b.close()},a.cancel=function(){b.dismiss("cancel")}}]),app.controller("DatePickerCtrl",["$scope",function(a){a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.toggleMin=function(){a.minDate=null,a.maxDate=new Date,a.dateMin=new Date},a.toggleMin(),a.open1=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.mode="month",a.initDate=new Date,a.formats=["MM-dd-yyyy","dd-MMM-yyyy","dd-MMMM-yyyy","yyyy-MM-dd","dd/MM/yyyy","yyyy-MMM","shortDate"],a.format=a.formats[4],a.format1=a.formats[5]}]),app.controller("Payment_Controller",["$scope","$rootScope","$rootScope","$state","$localStorage","NgTableParams","ApiCall","$timeout",function(a,b,b,c,d,e,f,g){a.user={},a.paymentConfirm=function(){f.postTransaction(a.user,function(a){console.log("posted")},function(a){})}}]),app.controller("Return_Controller",["$scope","$rootScope","$rootScope","$state","$stateParams","$localStorage","NgTableParams","ApiCall","Util","$timeout","UserModel","$uibModal",function(a,b,b,c,d,e,f,g,h,i,j,k){a.user={},a.active_tab1="income",a.list={},a.itrIdList={},a.yearList={},a.active_tab="year",a.user.fiscalYear="",a.muna={},a.tabChange=function(b){a.active_tab=b},a.tabChangeDetails=function(b){a.active_tab1=b},a.checkAdmin=function(){a.superAdmin=!1;var b=j.getUser();return console.log(b),"superAdmin"==b.role.type?a.superAdmin=!0:a.superAdmin=!1,a.superAdmin},a.checkStatus=function(b,d,e){return a.is_closed=!1,"payment"==c.current.name?("closed"!=b&&"processing"!=b&&null!=d&&0!=e||(a.is_closed=!0),a.is_closed):"return-file-list"==c.current.name?("closed"!=b&&"pending"!=b||(a.is_closed=!0),a.is_closed):a.is_closed},a.checkPending=function(b){return a.is_pending=!1,"closed"!=b&&"processing"!=b||(a.is_pending=!0),a.is_pending},a.returnFile=function(){a.user.client=j.getUser()._id,g.postReturnFile(a.user,function(a){h.alertMessage("success","Data Saved Successfully");var b=j.getUser();c.go("user-profile",{user_id:b._id})},function(a){h.alertMessage("danger",a.data.message)})},a.returnFileList=function(){var b={status:d.status};console.log(b),g.getReturnList(b,function(b){console.log(b),a.list=b.data,a.returnList=new f,a.returnList.settings({dataset:a.list})},function(a){})},a.showFiscalYear=function(){var b=j.getUser();console.log(b);var e={client:d.client_id};"previous-return-file-details"==c.current.name&&"client"==b.role.type&&(console.log("client login and previous return file details"),e.client=b._id),console.log(e),g.getFiscalYear(e,function(b){a.yearList=b.data,console.log(a.yearList)},function(a){})},a.getItrId=function(){g.getItr(function(b){console.log(b),a.itrIdList=b.data},function(a){})},a.changeReturnFileStatus=function(b){a.user._id=b,a.user.status="closed",""!=a.user.fiscalYear&&a.user.fiscalYear||delete a.user.fiscalYear,g.updateReturnFile(a.user,function(a){h.alertMessage("success","Status Changed Successfully");j.getUser();c.go("return-file-list")},function(a){h.alertMessage("Failed")})},a.changeStatusProcessing=function(b){a.user._id=b,a.user.status="processing",a.user.successMessage="Payment Success",a.user.failedMessage="null",""!=a.user.fiscalYear&&a.user.fiscalYear||delete a.user.fiscalYear,g.updateReturnFile(a.user,function(a){h.alertMessage("success","Payment Verified Successfully");j.getUser();c.go("payment")},function(a){h.alertMessage("Failed")})},a.failTransaction=function(b){a.failedReturnFileId=b,a.modalInstance=k.open({animation:!0,templateUrl:"view/modals/fail-transaction-modal.html",controller:"FailTransacModalCtrl",size:"md",resolve:{sendFailMessage:function(){return a.sendFailMessage}}})},a.sendFailMessage=function(b){a.user=b,a.user._id=a.failedReturnFileId,a.user.status="failed",console.log(a.user),g.updateReturnFile(a.user,function(a){h.alertMessage("success","Transaction Failed"),c.go("payment")},function(a){h.alertMessage("Failed")})},a.returnFileDetails=function(){var b=j.getUser(),c={fiscalYear:a.user.fiscalYear};"superAdmin"==b.role.type&&(c.client=d.client_id),g.getReturnFile(c,function(b){a.returnDetails=b.data[0],console.log(a.returnDetails),a.returnDetails&&(a.returnDetails.total=0,a.returnDetails.conEmpInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.conEmpInc)),a.returnDetails.businessInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.businessInc)),a.returnDetails.capitalGainInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.capitalGainInc)),a.returnDetails.rentalInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.rentalInc)),a.returnDetails.houseLoanInterestInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.houseLoanInterestInc)),a.returnDetails.fixDepositInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.fixDepositInc)),a.returnDetails.savingAcInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.savingAcInc)),a.returnDetails.otherInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.otherInc)),a.user.total&&(a.returnDetails.total=a.user.total.toFixed(2)))},function(a){})},a.returnFilesDetails=function(){var b=(j.getUser(),{fiscalYear:d.fiscalYear,_id:d.returnFile_id});g.getReturnFile(b,function(b){a.returnDetails=b.data[0],console.log(a.returnDetails),a.returnDetails&&(a.returnDetails.total=0,a.returnDetails.conEmpInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.conEmpInc)),a.returnDetails.businessInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.businessInc)),a.returnDetails.capitalGainInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.capitalGainInc)),a.returnDetails.rentalInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.rentalInc)),a.returnDetails.houseLoanInterestInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.houseLoanInterestInc)),a.returnDetails.fixDepositInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.fixDepositInc)),a.returnDetails.savingAcInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.savingAcInc)),a.returnDetails.otherInc&&(a.returnDetails.total=parseFloat(a.returnDetails.total)+parseFloat(a.returnDetails.otherInc)),a.user.total&&(a.returnDetails.total=a.user.total.toFixed(2)))},function(a){})},a.paymentConfirm=function(){""!=a.user.fiscalYear&&a.user.fiscalYear||delete a.user.fiscalYear,g.postTransaction(a.user,function(b){console.log(a.user),g.updateReturnFile(a.user,function(a){console.log(a)},function(a){}),h.alertMessage("success","Payment Confirmed Successfully");var d=j.getUser();c.go("user-profile",{user_id:d._id})},function(a){})},a.getPayment=function(){g.getPaymentList(function(b){console.log(b),a.paymentList=b.data,a.paymentsList=new f,a.paymentsList.settings({dataset:a.paymentList})},function(a){})},a.incomeCalculation=function(){a.user.total=0,a.user.conEmpInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.conEmpInc)),a.user.businessInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.businessInc)),a.user.capitalGainInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.capitalGainInc)),a.user.rentalInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.rentalInc)),a.user.houseLoanInterestInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.houseLoanInterestInc)),a.user.fixDepositInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.fixDepositInc)),a.user.savingAcInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.savingAcInc)),a.user.otherInc&&(a.user.total=parseFloat(a.user.total)+parseFloat(a.user.otherInc)),a.user.total=a.user.total.toFixed(2)}}]),app.controller("FailTransacModalCtrl",["$scope","$state","$uibModalInstance","sendFailMessage",function(a,b,c,d){a.user={},a.fail=function(){d(a.user),c.close()},a.cancel=function(){c.dismiss("cancel")}}]),app.controller("User_Controller",["$scope","$timeout","$rootScope","$state","$localStorage","NgTableParams","ApiCall","UserModel","Util","$stateParams",function(a,b,c,d,e,f,g,h,i,j){a.user={},a.tempAdhar={},a.tempPAN={},a.active_tab="details",a.userDetails={},a.tabChange=function(b){a.active_tab=b},a.getRoll=function(){g.getRole(function(b){angular.forEach(b.data,function(b){"client"==b.type&&(a.user.role=b._id)})})},a.checkPassword=function(b,c){b!=c&&(a.showPasswordMisMatch=!0),b==c&&(a.showPasswordMisMatch=!1)},a.registerUser=function(){c.showPreloader=!0,g.postUser(a.user,function(a){c.showPreloader=!1,console.log(a),console.log("its response"),200==a.statusCode?(i.alertMessage("success","You have successfully register please check your mail"),d.go("login")):i.alertMessage("danger","Something went wrong please try again")},function(a){console.log(a),500==a.data.statusCode&&(a.data.data.errors.email?i.alertMessage("danger",a.data.data.errors.email.message):a.data.data.errors.mobile&&i.alertMessage("danger",a.data.data.errors.mobile.message),c.showPreloader=!1)})},a.profileUpdate=function(){a.tempAdhar.imageName&&(a.user.adharDetails={fileName:a.tempAdhar.imageName,base64:a.tempAdhar.image.split(";base64,")[1]}),a.tempPAN.imageName&&(a.user.panDetails={fileName:a.tempPAN.imageName,base64:a.tempPAN.image.split(";base64,")[1]}),a.user._id=h.getUser()._id,c.showPreloader=!0,g.updateUser(a.user,function(a){c.showPreloader=!1,h.setUser(a.data.user),e.token=a.data.token;var b=h.getUser();i.alertMessage("success","Data Updated Successfully"),d.go("user-profile",{user_id:b._id})},function(a){c.showPreloader=!1,console.log("updateUser  "+a)})},a.getUserDetails=function(c){a.client_id=c,b(function(){if(a.user=h.getUser(),a.user||j.user_id||a.client_id){var b={_id:j.user_id||a.user._id||a.client_id};g.getUser(b,function(b){console.log(b),a.userDetails=b.data,a.userDetails.accNo=parseInt(a.userDetails.accNo),a.userDetails.pin=parseInt(a.userDetails.pin)},function(a){})}})},a.getUser=function(b){if(a.user._id=b,a.user._id){var c={_id:a.user._id};g.getUser(c,function(b){console.log(b),a.userDetails=b.data},function(a){})}}}]),app.directive("fileModell",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]),app.directive("updateHeight",function(){return{restrict:"A",link:function(a,b,c){$ta=b;var d=$(window).height();$ta.css({"min-height":d-100+"px"})}}}),app.directive("fileModel",["$parse",function(a){return{restrict:"A",scope:{fileread:"=",filename:"="},link:function(a,b,c){b.bind("change",function(){var c=new FileReader;c.onload=function(c){a.$apply(function(){a.fileread=c.target.result,a.filename=b[0].files[0].name})},c.readAsDataURL(b[0].files[0])})}}}]),app.directive("numbersOnly",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b}}d.$parsers.push(e)}}}),app.directive("floatsOnly",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){var b=a.replace(/[^[0-9\.]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b}d.$parsers.push(e)}}}),app.directive("capitalize",["uppercaseFilter","$parse",function(a,b){return{require:"ngModel",link:function(a,c,d,e){var f=function(a){if(a){input=a.toLowerCase();var b=input.substring(0,3).toUpperCase();return b!==a&&(e.$setViewValue(b),e.$render()),b}},g=b(d.ngModel);e.$parsers.push(f),f(g(a))}}}]);